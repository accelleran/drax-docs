
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://accelleran.github.io/drax-docs/benetel650-install/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.0">
    
    
      
        <title>Index - dRAX</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe914879.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configure-the-du" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dRAX" class="md-header__button md-logo" aria-label="dRAX" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dRAX
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../core-install/" class="md-tabs__link">
      Core Installation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../kubernetes-install/" class="md-tabs__link">
      Kubernetes Installation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../drax-install/" class="md-tabs__link">
      dRAX Installation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../du-install/" class="md-tabs__link">
      DU Installation
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dRAX" class="md-nav__button md-logo" aria-label="dRAX" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    dRAX
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../core-install/" class="md-nav__link">
        Core Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes-install/" class="md-nav__link">
        Kubernetes Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../drax-install/" class="md-nav__link">
        dRAX Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../du-install/" class="md-nav__link">
        DU Installation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Index</h1>
                
                <h2 id="configure-the-du">Configure the DU<a class="headerlink" href="#configure-the-du" title="Permanent link">⚓︎</a></h2>
<p>Other then the B210, benetel uses 2 software components. 2 Containers, a effnet du and phluido l1.
The phluido rru is not needed. This component resides in the benetel equipment.</p>
<p>adapt the <code>PhluidoL1_NR_Benetel.cfg</code> file delivered by effnet
Make sure to set the value <code>LicenseKey</code> option to the received Phluido license key:</p>
<div class="highlight"><pre><span></span><code>to be tested which .cfg to use
</code></pre></div>
<p>Create a configuration file for the Effnet DU:</p>
<div class="highlight"><pre><span></span><code>to be tested which .json to use
</code></pre></div>
<p>Before creating the <code>docker-compose.yml</code> file, make sure to set the <code>$CU_IP</code> environment variable.
This IP address can be determined by executing the following command.
The CU address is the second IP address.
This IP address should be in the IP pool that was assigned to MetalLB in <a href="/drax-docs/drax-install/">dRax Installation</a>.</p>
<div class="highlight"><pre><span></span><code>kubectl get services <span class="p">|</span> grep <span class="s1">&#39;acc-5g-cu-cp-.*-sctp-f1&#39;</span>
</code></pre></div>
<p>Now, create a docker-compose configuration file:</p>
<div class="highlight"><pre><span></span><code>tee accelleran-du-phluido/accelleran-du-phluido-2021-06-30/docker-compose.yml <span class="s">&lt;&lt;EOF</span>
<span class="s">version: &quot;3&quot;</span>

<span class="s">services:</span>

<span class="s">  phluido_l1:</span>
<span class="s">    image: phluido_l1</span>
<span class="s">    container_name: phluido_l1_cn</span>
<span class="s">    tty: true</span>
<span class="s">    privileged: true</span>
<span class="s">    ipc: shareable</span>
<span class="s">    shm_size: 2gb</span>
<span class="s">    command: /config.cfg</span>
<span class="s">    volumes:</span>
<span class="s">      - &quot;$PWD/phluido/PhluidoL1_NR_B210.cfg:/config.cfg:ro&quot;</span>
<span class="s">      - &quot;$PWD/logs/l1:/workdir&quot;</span>
<span class="s">      - &quot;/etc/machine-id:/etc/machine-id:ro&quot;</span>
<span class="s">    working_dir: &quot;/workdir&quot;</span>
<span class="s">    network_mode: host</span>

<span class="s">  du:</span>
<span class="s">    image: gnb_du_main_phluido</span>
<span class="s">    volumes:</span>
<span class="s">      - &quot;$PWD/b210_config_20mhz.json:/config.json:ro&quot;</span>
<span class="s">      - &quot;$PWD/logs/du:/workdir&quot;</span>
<span class="s">      - /run/pcscd/pcscd.comm:/run/pcscd/pcscd.comm</span>
<span class="s">    ipc: container:phluido_l1_cn</span>
<span class="s">    tty: true</span>
<span class="s">    cap_add:</span>
<span class="s">      - CAP_SYS_NICE</span>
<span class="s">      - CAP_IPC_LOCK</span>
<span class="s">    depends_on:</span>
<span class="s">      - phluido_l1</span>
<span class="s">    entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;sleep 4 &amp;&amp; exec /gnb_du_main_phluido /config.json&quot;]</span>
<span class="s">    working_dir: &quot;/workdir&quot;</span>
<span class="s">    extra_hosts:</span>
<span class="s">      - &quot;cu:$CU_IP&quot;</span>

<span class="s">  phluido_rru:</span>
<span class="s">    image: phluido_rru</span>
<span class="s">    tty: true</span>
<span class="s">    privileged: true</span>
<span class="s">    depends_on:</span>
<span class="s">      - du</span>
<span class="s">      - phluido_l1</span>
<span class="s">    network_mode: host</span>
<span class="s">    volumes:</span>
<span class="s">      - &quot;$PWD/phluido/PhluidoRRU_NR_EffnetTDD_B210.cfg:/config.cfg:ro&quot;</span>
<span class="s">      - &quot;$PWD/logs/rru:/workdir&quot;</span>
<span class="s">    entrypoint: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;sleep 20 &amp;&amp; exec /PhluidoRRU_NR /config.cfg&quot;]</span>
<span class="s">    working_dir: &quot;/workdir&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<h2 id="prepare-the-benetel-560">Prepare the Benetel 560<a class="headerlink" href="#prepare-the-benetel-560" title="Permanent link">⚓︎</a></h2>
<p>The benetel is connected with a fiber to the server.</p>
<div class="highlight"><pre><span></span><code>:ad@5GCN:~$ lshw <span class="p">|</span> grep SFP -C <span class="m">5</span>
WARNING: you should run this program as super-user.
             capabilities: pci normal_decode bus_master cap_list
             configuration: <span class="nv">driver</span><span class="o">=</span>pcieport
             resources: irq:29 ioport:f000<span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">4096</span><span class="o">)</span> memory:f8000000-f86fffff
           *-network:0 DISABLED
                description: Ethernet interface
                product: 82599ES <span class="m">10</span>-Gigabit SFI/SFP+ Network Connection
                vendor: Intel Corporation
                physical id: <span class="m">0</span>
                bus info: pci@0000:2d:00.0
                logical name: enp45s0f0
                version: <span class="m">01</span>
--
                capabilities: bus_master cap_list rom ethernet physical fibre 10000bt-fd
                configuration: <span class="nv">autonegotiation</span><span class="o">=</span>off <span class="nv">broadcast</span><span class="o">=</span>yes <span class="nv">driver</span><span class="o">=</span>ixgbe <span class="nv">driverversion</span><span class="o">=</span><span class="m">5</span>.1.0-k <span class="nv">firmware</span><span class="o">=</span>0x2b2c0001 <span class="nv">latency</span><span class="o">=</span><span class="m">0</span> <span class="nv">link</span><span class="o">=</span>no <span class="nv">multicast</span><span class="o">=</span>yes
                resources: irq:202 memory:f8000000-f807ffff ioport:f020<span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">32</span><span class="o">)</span> memory:f8200000-f8203fff memory:f8080000-f80fffff memory:f8204000-f8303fff memory:f8304000-f8403fff
           *-network:1 DISABLED
                description: Ethernet interface
                product: 82599ES <span class="m">10</span>-Gigabit SFI/SFP+ Network Connection
                vendor: Intel Corporation
                physical id: <span class="m">0</span>.1
                bus info: pci@0000:2d:00.1
                logical name: enp45s0f1
                version: <span class="m">01</span>
</code></pre></div>
<p>by setting both network devices to UP you find out which one is connected.
In our case its enp45s0f0.</p>
<div class="highlight"><pre><span></span><code>:ad@5GCN:~$ sudo ip link <span class="nb">set</span> dev enp45s0f0 up
:ad@5GCN:~$ sudo ip link <span class="nb">set</span> dev enp45s0f1 up
:ad@5GCN:~$ ip -br a
    :
enp45s0f0        UP             fe80::6eb3:11ff:fe08:a4e0/64 
enp45s0f1        DOWN           
    :
</code></pre></div>
<p>configuring the static ip of enp45s0f0 is done via netplan.
add this part to <code>/etc/netplan/50-cloud-init.yaml</code> . 
In some installation it might be anot </p>
<div class="highlight"><pre><span></span><code>network:
    ethernets:
       enp45s0f0:
          dhcp4: <span class="nb">false</span>
          dhcp6: <span class="nb">false</span>
          optional: <span class="nb">true</span>
          addresses:
              - <span class="m">10</span>.10.0.1/24
</code></pre></div>
<p>To apply this configuration you can use</p>
<div class="highlight"><pre><span></span><code>sudo netplan apply 
</code></pre></div>
<p>This needs to be the result</p>
<div class="highlight"><pre><span></span><code>$ ip -br a <span class="p">|</span> grep enp45
enp45s0f0        UP             <span class="m">10</span>.10.0.1/24 fe80::6eb3:11ff:fe08:a4e0/64 
enp45s0f1        DOWN           
</code></pre></div>
<p>The ip benetel is configured with is <code>10.10.0.100</code>.
We found out using nmap this way.</p>
<div class="highlight"><pre><span></span><code>$ nmap <span class="m">10</span>.10.0.0/24

Starting Nmap <span class="m">7</span>.60 <span class="o">(</span> https://nmap.org <span class="o">)</span> at <span class="m">2021</span>-09-21 <span class="m">10</span>:15 CEST
Nmap scan report <span class="k">for</span> <span class="m">10</span>.10.0.1
Host is up <span class="o">(</span><span class="m">0</span>.000040s latency<span class="o">)</span>.
Not shown: <span class="m">996</span> closed ports
PORT     STATE SERVICE
<span class="m">22</span>/tcp   open  ssh
<span class="m">111</span>/tcp  open  rpcbind
<span class="m">5900</span>/tcp open  vnc
<span class="m">9100</span>/tcp open  jetdirect

Nmap scan report <span class="k">for</span> <span class="m">10</span>.10.0.100
Host is up <span class="o">(</span><span class="m">0</span>.0053s latency<span class="o">)</span>.
Not shown: <span class="m">998</span> closed ports
PORT    STATE SERVICE
<span class="m">22</span>/tcp  open  ssh
<span class="m">111</span>/tcp open  rpcbind

Nmap <span class="k">done</span>: <span class="m">256</span> IP addresses <span class="o">(</span><span class="m">2</span> hosts up<span class="o">)</span> scanned <span class="k">in</span> <span class="m">3</span>.10 seconds
</code></pre></div>
<p>A route is added also in the route table automatically</p>
<div class="highlight"><pre><span></span><code>$ route -n <span class="p">|</span> grep <span class="m">10</span>.10.0.0
<span class="m">10</span>.10.0.0       <span class="m">0</span>.0.0.0         <span class="m">255</span>.255.255.0   U     <span class="m">0</span>      <span class="m">0</span>        <span class="m">0</span> enp45s0f0
<span class="sb">````</span>

now you can ssh to the benetel

<span class="sb">```</span> bash
$ ssh root@10.10.0.100

Last login: Fri Feb  <span class="m">7</span> <span class="m">16</span>:45:59 <span class="m">2020</span> from <span class="m">10</span>.10.0.1
root@benetelru:~# ls -l
-rwxrwxrwx    <span class="m">1</span> root     root          <span class="m">1572</span> Sep <span class="m">10</span>  <span class="m">2021</span> DPLL3_1PPS_REGISTER_PATCH.txt
drwxrwxrwx    <span class="m">2</span> root     root             <span class="m">0</span> Feb  <span class="m">7</span> <span class="m">16</span>:44 adrv9025
-rwxrwxrwx    <span class="m">1</span> root     root          <span class="m">1444</span> Feb  <span class="m">7</span> <span class="m">16</span>:40 dev_struct.dat
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">17370</span> Sep <span class="m">10</span>  <span class="m">2021</span> dpdModelReadback.txt
-rwxrwxrwx    <span class="m">1</span> root     root          <span class="m">5070</span> Feb  <span class="m">7</span> <span class="m">17</span>:00 dpdModelcoefficients.txt
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">24036</span> Sep <span class="m">10</span>  <span class="m">2021</span> eeprog_cp60
-rwxrwxrwx    <span class="m">1</span> root     root       <span class="m">1825062</span> Feb  <span class="m">7</span> <span class="m">15</span>:58 madura_log_file.txt
-rw-------    <span class="m">1</span> root     root          <span class="m">1230</span> Feb  <span class="m">7</span>  <span class="m">2020</span> nohup.out
-rwxr-xr-x    <span class="m">1</span> root     root            <span class="m">57</span> Feb  <span class="m">7</span>  <span class="m">2020</span> nohup_handshake
-rwxrwxrwx    <span class="m">1</span> root     root           <span class="m">571</span> Feb  <span class="m">7</span>  <span class="m">2020</span> progBenetelDuMAC_CATB
-rwxr-xr-x    <span class="m">1</span> root     root       <span class="m">1121056</span> Feb  <span class="m">7</span> <span class="m">16</span>:24 quickRadioControl
-rwxrwxrwx    <span class="m">1</span> root     root       <span class="m">1151488</span> Sep <span class="m">10</span>  <span class="m">2021</span> radiocontrol_prv-nk-cliupdate
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">22904</span> Aug <span class="m">24</span>  <span class="m">2021</span> registercontrol
-rwxrwxrwx    <span class="m">1</span> root     root           <span class="m">164</span> Feb  <span class="m">7</span> <span class="m">16</span>:35 removeResetRU_CATB
-rwxrwxrwx    <span class="m">1</span> root     root           <span class="m">163</span> Feb  <span class="m">7</span>  <span class="m">2020</span> reportRuStatus
-rwxrwxrwx    <span class="m">1</span> root     root           <span class="m">162</span> Feb  <span class="m">7</span> <span class="m">16</span>:35 resetRU_CATB
-rwxr-xr-x    <span class="m">1</span> root     root            <span class="m">48</span> Feb  <span class="m">7</span> <span class="m">15</span>:57 runSync
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">21848</span> Sep <span class="m">10</span>  <span class="m">2021</span> smuconfig
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">17516</span> Sep <span class="m">10</span>  <span class="m">2021</span> statmon
-rwxrwxrwx    <span class="m">1</span> root     root         <span class="m">23248</span> Sep <span class="m">10</span>  <span class="m">2021</span> syncmon
-rwxr-xr-x    <span class="m">1</span> root     root           <span class="m">182</span> Feb  <span class="m">7</span> <span class="m">16</span>:41 trialHandshake
root@benetelru:~# 
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.tabs", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.53c85856.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.716f8af4.min.js"></script>
      
    
  </body>
</html>